---
sidebar_position: 1
description: 主控固件更新
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# 主控固件更新  {#mcu-firmware-update}

固件是键盘的微控制器中运行的程序。新功能的加入或者 bug 的修复都是通过固件更新完成的。

:::tip

固件更新不受固件版本号的限制，可随意越级、降级更新。

:::

:::caution

固件更新后，键盘上存储的个人设置将被全部还原为初始状态，例如 RGB 矩阵设置、VIA 自定义设置等，但 BLE 配对信息不会被清除。

:::

## 更新步骤 {#updating-step}

<Tabs queryString="pcb-variant">
  <TabItem value="hotswap" label="热插拔" default>

<p className="step-number-text"> I. </p>

  从 [固件](/docs-ankh-r2/downloads/firmware?pcb-variant=hotswap) 页面下载固件。

<p className="step-number-text"> II. </p>

 在你的电脑上下载并安装 QMK Toolbox 软件。

| 版本 | <Icon icon="fa-brands fa-windows" /> Windows | <Icon icon="fa-brands fa-apple" /> macOS |
| --- | --- | --- |
| 0.3.3 | <Icon icon="fa-solid fa-circle-down" /> [下载](https://github.com/qmk/qmk_toolbox/releases/download/0.3.3/qmk_toolbox_install.exe) | <Icon icon="fa-solid fa-circle-down" /> [下载](https://github.com/qmk/qmk_toolbox/releases/download/0.3.3/QMK.Toolbox.pkg) |

:::tip

上方提供的下载链接来自 <Icon icon="fa-brands fa-github" /> [Github](https://github.com/qmk/qmk_toolbox/releases)，如果下载速度过慢，可从 Helix Lab QQ 群下载。

:::

<p className="step-number-text"> III. </p>

 打开 QMK Toolbox，在 `Local file` 一栏中载入固件所在的地址。

<p className="step-number-text"> IU. </p>

关闭电池开关 <sup>[<Icon icon="fa-solid fa-compass" /> 怎么做？](/docs-ankh-r2/battery/battery-switch)</sup>，断开 USB 数据线，然后按住 <kbd>**backspace**</kbd> 的同时插入 USB 数据线。

<p className="step-number-text"> UI. </p> 如果键盘已经正确进入引导模式，在 QMK Toolbox 中你会看到如下的黄色小字：

<p className="special-text"> STM32 DFU device connected: STMicroelectronics STM32  BOOTLOADER (0483:DF11:2200) </p>

<p className="step-number-text"> UII. </p>

 点击 QMK Toolbox 中的 `Flash` 按钮，等待约 10 秒后，烧录即可完成。

  </TabItem>
  <TabItem value="soldered" label="焊接">
    
<Icon icon="fa-solid fa-minus" />

  </TabItem>
</Tabs>
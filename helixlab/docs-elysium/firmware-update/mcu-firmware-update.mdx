---
sidebar_position: 1
description: 主控更新固件
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Stepper, { Step } from '@site/src/components/Stepper/Stepper';

# 主控固件更新  {#mcu-firmware-update}

固件是键盘的微控制器中运行的程序。新功能的加入或者 bug 的修复都是通过固件更新完成的。

:::tip

固件更新不受固件版本号的限制，可随意越级、降级更新。

:::

:::caution

固件更新后，键盘上存储的个人设置将被全部还原为初始状态，例如 RGB 矩阵设置、VIA 自定义设置等，但 BLE 和 2G4 配对信息不会被清除。

:::

## 固件更新步骤 {#updating-step}

<Tabs queryString="pcb-variant">
  <TabItem value="hotswap" label="热插拔" default>

 <Stepper
  initialStep={1}
  backButtonText="Previous"
  nextButtonText="Next"
  style = {{  marginTop: '5rem', marginBottom: '3rem'}}
>
  <Step>
    <h2>热插拔 固件更新步骤</h2>
    <p>请点击 “Next”。</p>
  </Step>
  <Step>
    <h2>准备固件</h2>
    从[固件](/docs-elysium/downloads/firmware?pcb-variant=hotswap)页面下载固件。
  </Step>
  <Step>
    <h2>准备 QMK Toolbox 软件</h2>
     在你的电脑上下载并安装 QMK Toolbox 软件，若已安装则忽略。

| 版本 | <Icon icon="fa-brands fa-windows" /> Windows | <Icon icon="fa-brands fa-apple" /> macOS |
| --- | --- | --- |
| 0.3.3 | <Icon icon="fa-solid fa-circle-down" />[下载](https://github.com/qmk/qmk_toolbox/releases/download/0.3.3/qmk_toolbox.exe) | <Icon icon="fa-solid fa-circle-down" />[下载](https://github.com/qmk/qmk_toolbox/releases/download/0.3.3/QMK.Toolbox.pkg) |

:::tip
上方下载链接来自Github，如果下载速度过慢，可从 Helix Lab [QQ 群](https://qm.qq.com/cgi-bin/qm/qr?k=CZ8cITH1Ttx95m1B79vkY69c7OyMOySw&authKey=r2Ol3%2BTGqOnyk5bjTdqW3h%2BXl13HqU446XeAc1vCHHt98YYqULl1W%2BHz0FZgtv4B&noverify=0&group_code=942327559)获取文件。
:::
  </Step>
  <Step>
    <h2>在 QMK Toolbox 中载入固件</h2>
    <p>以管理员权限打开 QMK Toolbox，在 `Local file` 一栏中载入固件所在的地址。</p>
  </Step>
    <Step>
    <h2>将键盘置入引导模式</h2>
    <p>将键盘通过 USB 数据线连接到电脑主机，并让键盘进入引导模式，下图所示的绿色按键为引导模式键。</p>
    ![](./img/elysium_keycodes_boot.svg)
    <p>按下组合键 <kbd>**fn**</kbd> + <kbd>**shift**</kbd> + <kbd>**esc**</kbd>，则键盘会进入引导模式。</p>
  </Step>
  <Step>
  <h2>检查引导模式是否成功进入</h2>
  <p>如果键盘已经正确进入引导模式，在 QMK Toolbox 中你会看到如下的黄色小字：</p>
  <p className="special-text"> STM32 DFU device connected: STMicroelectronics STM32  BOOTLOADER (0483:DF11:2200) </p>

:::info
如果在操作过程中遇到任何红色字体的错误提示，请首先检查您的 QMK Toolbox 版本是否为 0.3.3。如果确认版本正确，请按照以下步骤操作：在 QMK Toolbox 中点击 `Tools` 菜单，选择 `Install Drivers` 以安装所需驱动程序。完成驱动安装后，请关闭并重新启动 QMK Toolbox 应用程序。
:::
  </Step>
    <Step>
  <h2>完成！</h2>
  <p>点击 QMK Toolbox 中的 `Flash` 按钮，等待约 10 秒后，烧录即可完成。</p>
  </Step>
  
</Stepper>

  </TabItem>
  <TabItem value="soldered" label="焊接">
    
  <Stepper
  initialStep={1}
  backButtonText="Previous"
  nextButtonText="Next"
  style = {{  marginTop: 'rem', marginBottom: '0rem'}}
  >
  <Step>
    <h2>焊接 固件更新步骤</h2>
    <p>请点击 “Next”。</p>
  </Step>
  <Step>
    <h2>准备固件</h2>
    <p>从[固件](/docs-elysium/downloads/firmware?pcb-variant=soldered)页面下载固件。请检查固件的后缀名，确保为 `.uf2`。</p>
  </Step>
    <Step>
    <h2>将键盘置入引导模式</h2>
    <p>断开 USB 数据线，按住键盘上的 <kbd>**esc**</kbd> 的同时插入 USB 数据线。</p>
  </Step>
      <Step>
    <h2>完成！</h2>
    <p>你的电脑上会弹出一个名为 `BOOT` 的新卷宗，将固件拖入此卷宗即可完成烧录。</p>
    <p>烧录完毕后，卷宗会自动弹出。</p>
  </Step>
  
</Stepper>

  </TabItem>
</Tabs>